@using Mikrotik.BL.DTOs;

@{
    ViewBag.Title = "Bienvenidos";
    var systemResource = new SystemResourceDTO();
    var listQueueSimple = new List<QueueSimpleDTO>();
    var listInterface = new List<InterfaceDTO>();
    var listIpAddress = new List<IpAddressDTO>();
    var listRoute = new List<RouteDTO>();
    var listFile = new List<FileDTO>();

    if (ViewBag.SystemResource != null &&
        ViewBag.QueueSimple != null &&
        ViewBag.Interface != null &&
        ViewBag.IpAddress != null &&
        ViewBag.Route != null &&
        ViewBag.File != null)
    {
        systemResource = (SystemResourceDTO)ViewBag.SystemResource;
        listQueueSimple = (List<QueueSimpleDTO>)ViewBag.QueueSimple;
        listInterface = (List<InterfaceDTO>)ViewBag.Interface;
        listIpAddress = (List<IpAddressDTO>)ViewBag.IpAddress;
        listRoute = (List<RouteDTO>)ViewBag.Route;
        listFile = (List<FileDTO>)ViewBag.File;
    }
}

@Html.ValidationSummary(true, "", new { @class = "text-danger" })
<hr />
<div class="container" style="margin-top:90px;">
    <div class="row">
        <div class="col-12 col-lg-3">
            <button class="btn btn-primary btn-block">
                <i class="fa fa-microchip fa-2x"></i> CPU <br>
                <span id="cpuTxt">@systemResource.CpuLoad</span>
            </button>
        </div>
        <div class="col-12 col-lg-3">
            <button class="btn btn-success btn-block">
                <i class="fa fa-cube fa-2x"></i> Modelo <br>
                <span id="modelTxt">@systemResource.BoardName</span>
            </button>
        </div>
        <div class="col-12 col-lg-3">
            <button class="btn btn-primary btn-block">
                <i class="fa fa-clock-o fa-2x"></i> UpTime <br>
                <span id="uptimeTxt">@systemResource.Uptime</span>
            </button>
        </div>
        <div class="col-12 col-lg-3">
            <button class="btn btn-success btn-block">
                <i class="fa fa-info-circle fa-2x"></i> Version <br>
                <span id="versionTxt">@systemResource.Version</span>
            </button>
        </div>
    </div>
    <hr />
    <h1>Queue</h1>
    <hr />
    <div class="row">
        <div class="col-12 responsive-table">
            <table id="tabla" class="table table-hover table-striped">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Name</th>
                        <th>Target</th>
                        <th>Up</th>
                        <th>Down</th>
                    </tr>
                </thead>
                <tbody id="tableQueue">
                    @foreach (var item in listQueueSimple)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.Id)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Name)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Target)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Up)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Down)
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
    <hr />
    <div class="row">
        <div class="col-md-12">
            <div id="graph"></div>
        </div>
    </div>
    <hr />
    <h1>Interface</h1>
    <hr />
    <div class="row">
        <div class="col-12 responsive-table">
            <table id="tabla" class="table table-hover table-striped">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>MTU</th>
                    </tr>
                </thead>
                <tbody id="tableInterface">
                    @foreach (var item in listInterface)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.Id)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Name)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Type)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.MTU)
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
    <hr />
    <h1>Ip Address</h1>
    <hr />
    <div class="row">
        <div class="col-12 responsive-table">
            <table id="tabla" class="table table-hover table-striped">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Address</th>
                        <th>Network</th>
                        <th>Interface</th>
                    </tr>
                </thead>
                <tbody id="tableIpAddress">
                    @foreach (var item in listIpAddress)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.Id)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Address)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Network)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Interface)
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
    <hr />
    <h1>Route</h1>
    <hr />
    <div class="row">
        <div class="col-12 responsive-table">
            <table id="tabla" class="table table-hover table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>DesAddress</th>
                        <th>Gateway</th>
                        <th>Distance</th>
                    </tr>
                </thead>
                <tbody id="tableRoute">
                    @foreach (var item in listRoute)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.Id)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.DstAddress)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Gateway)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Distance)
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
    <hr />
    <h1>Files</h1>
    <hr />
    <div class="row">
        <div class="col-12 responsive-table">
            <table id="tabla" class="table table-hover table-striped">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Size</th>
                        <th>CreationTime</th>
                    </tr>
                </thead>
                <tbody id="tableFile">
                    @foreach (var item in listFile)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.Id)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Name)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Type)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Size)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.CreationTime)
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

@* data *@
<input type="text" hidden id="dataQueue" value="@ViewBag.QueueSimpleJson" />

<script type="text/javascript">
    var dataQueue = $('#dataQueue').val();
    var data = JSON.parse(dataQueue);

    // Use Morris.Bar
    Morris.Bar({
        element: 'graph',
        data: data,
        xkey: 'Name',
        ykeys: ['Up', 'Down'],
        labels: ['Up', 'Down']
    }).on('click', function (i, row) {
        console.log(i, row);
    });
</script>